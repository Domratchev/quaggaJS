var Quagga=function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(e.toString()).default:"object"==typeof exports?exports.Quagga=e(e.toString()).default:t.Quagga=e(e.toString()).default}(this,function(t){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r(r.s=29)}([function(t,e){function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function r(e){return t.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},r(e)}t.exports=r},function(t,e,r){var n=r(10),i=r(23);t.exports=function(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?i(t):e}},function(t,e,r){var n=r(24);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}},function(t,e,r){"use strict";r.d(e,"a",function(){return s});var n=r(1),i=r.n(n),a=r(0),o=r.n(a),u=r(8),s=function(){function t(e,r,n,a){i()(this,t),r?this.data=r:(this.data=new(n||Uint8Array)(e.x*e.y),a&&this.data.fill(0)),this.size=e}return o()(t,[{key:"inImageWithBorder",value:function(t,e){return t.x>=e&&t.y>=e&&t.x<this.size.x-e&&t.y<this.size.y-e}},{key:"subImageAsCopy",value:function(t,e,r){for(var n=t.size.y,i=t.size.x,a=0;a<i;a++)for(var o=0;o<n;o++)t.data[o*i+a]=this.data[(r+o)*this.size.x+e+a]}},{key:"get",value:function(t,e){return this.data[e*this.size.x+t]}},{key:"set",value:function(t,e,r){return this.data[e*this.size.x+t]=r,this}},{key:"zeroBorder",value:function(){for(var t=this.size.x,e=this.size.y,r=this.data,n=0;n<t;n++)r[n]=r[(e-1)*t+n]=0;for(var i=1;i<e-1;i++)r[i*t]=r[i*t+(t-1)]=0}},{key:"invert",value:function(){for(var t=this.data,e=t.length;e--;)t[e]=t[e]?0:1}},{key:"moments",value:function(t){var e=this.size.y,r=this.size.x,n=[],i=[];if(t<=0)return i;for(var a=0;a<t;a++)n[a]={m00:0,m01:0,m10:0,m11:0,m02:0,m20:0,theta:0,rad:0};for(var o=0;o<e;o++)for(var u=o*o,s=0;s<r;s++){var c=this.data[o*r+s];if(c>0){var l=n[c-1];l.m00+=1,l.m01+=o,l.m10+=s,l.m11+=s*o,l.m02+=u,l.m20+=s*s}}for(var f=Math.PI,h=f/4,d=0;d<t;d++){var v=n[d];if(!isNaN(v.m00)&&0!==v.m00){var g=v.m10/v.m00,_=v.m01/v.m00,y=v.m11/v.m00-g*_,p=v.m02/v.m00-_*_,m=v.m20/v.m00-g*g,b=.5*Math.atan((p-m)/(2*y))+(y>=0?h:-h)+f;v.theta=(180*b/f+90)%180-90,v.theta<0&&(v.theta+=180),v.rad=b>f?b-f:b,v.x=Math.cos(b),v.y=Math.sin(b),i.push(v)}}return i}},{key:"show",value:function(t,e){var r=this.size.y,n=this.size.x,i=t.getContext("2d");t.height=r,t.width=n;var a=i.getImageData(0,0,n,r),o=a.data,u=0;e||(e=1);for(var s=0;s<r;s++)for(var c=0;c<n;c++){var l=s*n+c;u=this.get(c,s)*e,o[4*l+0]=u,o[4*l+1]=u,o[4*l+2]=u,o[4*l+3]=255}i.putImageData(a,0,0)}},{key:"overlay",value:function(t,e,r,n){var i=[0,1,1],a=[255,255,255],o=[0,0,0],s=t.getContext("2d"),c=s.getImageData(r,n,this.size.x,this.size.y),l=c.data;(!e||e<0||e>360)&&(e=360);for(var f=this.data.length;f--;){i[0]=this.data[f]*e;var h=i[0]<=0?a:i[0]>=360?o:Object(u.d)(i);l[4*f+0]=h[0],l[4*f+1]=h[1],l[4*f+2]=h[2],l[4*f+3]=255}s.putImageData(c,r,n)}}]),t}()},function(t,e,r){t.exports=r(26)},function(t,e,r){r(2);var n=r(25);function i(e,r,a){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=i=Reflect.get:t.exports=i=function(t,e,r){var i=n(t,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(r):a.value}},i(e,r,a||e)}t.exports=i},function(t,e,r){"use strict";function n(t,e){e||(e=8);var r=8-e,n=function(t,e){e||(e=8);for(var r=t.data,n=8-e,i=new Int32Array(1<<e),a=r.length;a--;)i[r[a]>>n]++;return i}(t,e),i=[0],a=(1<<e)-1;function o(t,e){for(var r=0,i=t;i<=e;i++)r+=n[i];return r}function u(t,e){for(var r=0,i=t;i<=e;i++)r+=i*n[i];return r}for(var s=1;s<a;s++){var c=o(0,s),l=o(s+1,a),f=c*l||1,h=u(0,s)*l-u(s+1,a)*c;i[s]=h*h/f}return i.reduce(function(t,e,r,n){return e>n[t]?r:t},0)<<r}function i(t,e){var r=n(t),i=e.data;return t.data.forEach(function(t,e){i[e]=t<r?1:0}),r}function a(t,e){for(var r=t.data,n=t.size.x,i=e.data,a=r.length,o=n/2,u=0,s=n,c=0;s<a;){for(var l=0;l<o;l++)i[c]=r[u]+r[u+1]+r[s]+r[s+1]>>2,c++,u+=2,s+=2;u+=n,s+=n}}function o(t,e){var r=t[0],n=t[1],i=t[2],a=i*n,o=a*(1-Math.abs(r/60%2-1)),u=i-a,s=0,c=0,l=0;return r<60?(s=a,c=o):r<120?(s=o,c=a):r<180?(c=a,l=o):r<240?(c=o,l=a):r<300?(s=o,l=a):r<360&&(s=a,l=o),(e=e||[0,0,0])[0]=255*(s+u)|0,e[1]=255*(c+u)|0,e[2]=255*(l+u)|0,e}function u(t){for(var e=[],r=[],n=1;n*n<=t;n++)t%n==0&&(r.push(n),n*n!==t&&e.unshift(t/n|0));return r.concat(e)}function s(t,e){var r=0|Math.max(0|e.x,0|e.y),n=[8,10,15,20,32,60,80],i={"x-small":5,small:4,medium:3,large:2,"x-large":1},a=i[t]||0|i.medium,o=0|n[a],s=r/o|0;function c(t){for(var e=0,r=0|t[t.length>>1];e<t.length-1&&t[e]<s;)e++;return e>0&&(r=Math.abs(t[e]-s)>Math.abs(t[e-1]-s)?0|t[e-1]:0|t[e]),s/r<n[a+1]/n[a]&&s/r>n[a-1]/n[a]?{x:r,y:r}:null}return c(function(t,e){if(t===e)return u(t);for(var r=t>e?t:e,n=t>e?e:t,i=[],a=[],o=1;o*o<=n;o++)if(r%o==0&&n%o==0){a.push(o);var s=n/o|0;o!==s&&r%s==0&&i.unshift()}return a.concat(i)}(e.x,e.y))||c(u(r))||c(u(s*o))}r.d(e,"e",function(){return i}),r.d(e,"c",function(){return a}),r.d(e,"d",function(){return o}),r.d(e,"a",function(){return s}),r.d(e,"b",function(){return l});var c={top:function(t,e){return"%"===t.unit?e.height*t.value/100|0:e.height},right:function(t,e){return"%"===t.unit?e.width-e.width*t.value/100|0:e.width},bottom:function(t,e){return"%"===t.unit?e.height-e.height*t.value/100|0:e.height},left:function(t,e){return"%"===t.unit?e.width*t.value/100|0:e.width}};function l(t,e,r){var n={width:t,height:e},i=Object.keys(r).reduce(function(t,e){var i=function(t){return{value:parseFloat(t),unit:(t.indexOf("%"),t.length,"%")}}(r[e]),a=c[e](i,n);return t[e]=a,t},{});return{sx:i.left,sy:i.top,sw:i.right-i.left,sh:i.bottom-i.top}}},function(t,e,r){"use strict";r.d(e,"a",function(){return u});var n=r(1),i=r.n(n),a=r(0),o=r.n(a),u=function(){function t(){i()(this,t)}return o()(t,null,[{key:"drawRect",value:function(t,e,r,n){r.strokeStyle=n.color,r.fillStyle=n.color,r.lineWidth=n.lineWidth||1,r.beginPath(),r.strokeRect(t.x,t.y,e.x,e.y)}},{key:"drawPath",value:function(t,e,r,n){r.strokeStyle=n.color,r.fillStyle=n.color,r.lineWidth=n.lineWidth,r.beginPath(),r.moveTo(t[0][e.x],t[0][e.y]);for(var i=1;i<t.length;i++)r.lineTo(t[i][e.x],t[i][e.y]);r.closePath(),r.stroke()}},{key:"drawImage",value:function(t,e,r,n){var i=n.getImageData(0,0,e,r),a=i.data,o=t.length,u=a.length;if(u/o!=4)return!1;for(;o--;){var s=t[o];a[--u]=255,a[--u]=s,a[--u]=s,a[--u]=s}return n.putImageData(i,0,0),!0}}]),t}()},function(t,e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(e){return"function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?t.exports=n=function(t){return r(t)}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},n(e)}t.exports=n},function(t,e,r){var n=r(20),i=r(21),a=r(22);t.exports=function(t){return n(t)||i(t)||a()}},function(t,e){function r(t,e,r,n,i,a,o){try{var u=t[a](o),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,i)}t.exports=function(t){return function(){var e=this,n=arguments;return new Promise(function(i,a){var o=t.apply(e,n);function u(t){r(o,i,a,u,s,"next",t)}function s(t){r(o,i,a,u,s,"throw",t)}u(void 0)})}}},function(t,e,r){"use strict";r.d(e,"a",function(){return u}),r.d(e,"b",function(){return s});var n=r(1),i=r.n(n),a=r(0),o=r.n(a),u=[[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1]],s=function(){function t(e,r){i()(this,t),this.imageData=e.data,this.labelData=r.data,this.width=e.size.x}return o()(t,[{key:"trace",value:function(t,e,r,n){for(var i=0;i<7;i++){var a=t.cy+u[t.dir][0],o=t.cx+u[t.dir][1],s=a*this.width+o;if(this.imageData[s]===e&&(0===this.labelData[s]||this.labelData[s]===r))return this.labelData[s]=r,t.cy=a,t.cx=o,!0;0===this.labelData[s]&&(this.labelData[s]=n),t.dir=(t.dir+1)%8}return!1}},{key:"contourTracing",value:function(t,e,r,n,i){var a=null,o={cx:e,cy:t,dir:0};if(this.trace(o,n,r,i)){var u=a={x:e,y:t,dir:o.dir,next:null,prev:null},s=o.dir,c={x:o.cx,y:o.cy,dir:0,next:null,prev:u};u.next=c,u=c;do{o.dir=(o.dir+6)%8,this.trace(o,n,r,i),s!==o.dir?(u.dir=o.dir,c={x:o.cx,y:o.cy,dir:0,next:null,prev:u},u.next=c,u=c):(u.dir=s,u.x=o.cx,u.y=o.cy),s=o.dir}while(o.cx!==e||o.cy!==t);a.prev=u.prev,u.prev.next=a}return a}}]),t}()},function(t,e,r){"use strict";(function(t){var n,i,a,o,u,s,c,l,f,h,d,v,g=r(16),_=r(8),y=(r(9),r(5)),p=r(17),m=r(18),b=r(13),x={ctx:{binary:null},dom:{binary:null}},w={x:0,y:0};function k(t){var e=t.reduce(function(t,e){return t+e.rad},0)/t.length;(e=(180*e/Math.PI+90)%180-90)<0&&(e+=180),e=(180-e)*Math.PI/180;var r=Math.cos(e),i=Math.sin(e),a=new Float32Array([r,i,-i,r]);x.ctx.binary;t.forEach(function(t){for(var e=t.box,r=0;r<4;r++)e[r]=C(e[r],a)});var o=f.size.x,u=f.size.y,s=-o,c=-u;t.forEach(function(t){t.box.forEach(function(t){var e=t.x,r=t.y;e<o&&(o=e),e>s&&(s=e),r<u&&(u=r),r>c&&(c=r)})});var l=[{x:o,y:u},{x:s,y:u},{x:s,y:c},{x:o,y:c}];for(var h=function(t){var e=t[0],r=t[1],n=t[2],i=t[3],a=e*i-n*r;if(!a)return null;return new Float32Array([i/a,-r/a,-n/a,e/a])}(a),d=0;d<4;d++)l[d]=C(l[d],h);return n.halfSample&&l.forEach(function(t){t.x*=2,t.y*=2}),l}function C(t,e){var r=t.x,n=t.y;return{x:e[0]*r+e[2]*n,y:e[1]*r+e[3]*n}}function E(t){return function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"rad",n=[];return t.forEach(function(t,i){var a={rad:t[r],point:t,id:i},o=n.find(function(t){return t.fits(a)});o?o.add(a):n.push(new g.a(e,a))}),n}(t,.9).reduce(function(t,e){var r=e.points.length;return r>t.count?{item:e,count:r}:t},{item:{points:[]},count:0}).item.points.map(function(t){return t.point})}function S(t,e){f.subImageAsCopy(o,t,e),v.skeletonize()}function R(t,e,r,n){if(t.length>1){var i=Math.ceil(h.x/3),a=t.filter(function(t){return t.m00>i});if(a.length>1){var u=E(a),s=0|u.length;if(s>1&&s<<2>=3*a.length&&s<<2>t.length){var c=u.reduce(function(t,e){return t+e.rad},0)/s;return{index:e,pos:{x:r,y:n},box:[{x:r,y:n},{x:r+o.size.x,y:n},{x:r+o.size.x,y:n+o.size.y},{x:r,y:n+o.size.y}],moments:u,rad:c,x:Math.cos(c),y:Math.sin(c)}}}}return null}e.a={init:function(e,r){n=r,d=e,function(){i=n.halfSample?new y.a({x:d.size.x/2|0,y:d.size.y/2|0}):d,h=Object(_.a)(n.patchSize,i.size),w.x=i.size.x/h.x|0,w.y=i.size.y/h.y|0,f=new y.a(i.size,void 0,Uint8Array,!1),u=new y.a(h,void 0,Array,!0);var e=new ArrayBuffer(65536);o=new y.a(h,new Uint8Array(e,0,h.x*h.y)),a=new y.a(h,new Uint8Array(e,h.x*h.y*3,h.x*h.y),void 0,!0),v=Object(m.a)("undefined"!=typeof window?window:"undefined"!=typeof self?self:t,{size:h.x},e),l=new y.a({x:i.size.x/o.size.x|0,y:i.size.y/o.size.y|0},void 0,Array,!0),s=new y.a(l.size,void 0,void 0,!0),c=new y.a(l.size,void 0,Int32Array,!0)}(),n.useWorker||"undefined"==typeof document||(x.dom.binary=document.createElement("canvas"),x.dom.binary.className="binaryBuffer",x.ctx.binary=x.dom.binary.getContext("2d"),x.dom.binary.width=f.size.x,x.dom.binary.height=f.size.y)},locate:function(){n.halfSample&&Object(_.c)(d,i),Object(_.e)(i,f),f.zeroBorder();var t=function(){x.ctx.binary;for(var t=[],e=0;e<w.x;e++)for(var r=0;r<w.y;r++){var n=o.size.x*e,i=o.size.y*r;S(n,i),a.zeroBorder(),u.data.fill(0);var s=new p.a(a,u).rasterize(0),c=R(u.moments(s.count),r*w.x+e,n,i);c&&t.push(c)}return t}();if(t.length<w.x*w.y*.05)return null;var e=function(t){var e=.95,r=0;function n(){for(var t=0;t<c.data.length;t++)if(0===c.data[t]&&1===s.data[t])return t;return c.data.length}function i(t){var n=t%c.size.x,a=t/c.size.x|0;if(t<c.data.length){var o=l.data[t];c.data[t]=r,b.a.forEach(function(t){var r=a+t[0],u=n+t[1],f=r*c.size.x+u;if(0===s.data[f])c.data[f]=Number.MAX_VALUE;else if(0===c.data[f]){var h=l.data[f];Math.abs(h.x*o.x+h.y*o.y)>e&&i(f)}})}}s.data.fill(0),c.data.fill(0),l.data.fill(null),t.forEach(function(t){l.data[t.index]=t,s.data[t.index]=1}),s.zeroBorder();for(var a=0;(a=n())<c.data.length;)r++,i(a);return r}(t);if(e<1)return null;var r=function(t){var e=new Array(t).fill(0);return c.data.forEach(function(t){t>0&&e[t-1]++}),e.map(function(t,e){return{val:t,label:e+1}}).sort(function(t,e){return e.val-t.val}).filter(function(t){return t.val>=5})}(e);return 0===r.length?null:function(t,e){for(var r=[],n=(x.ctx.binary,function(e){var n=[];c.data.forEach(function(r,i){r===t[e].label&&n.push(l.data[i])});var i=k(n);i&&r.push(i)}),i=0;i<t.length;i++)n(i);return r}(r)},checkImageConstraints:function(t,e){var r=t.getWidth(),n=t.getHeight(),i=e.halfSample?1:0;if(t.getConfig().area){var a=Object(_.b)(r,n,t.getConfig().area);t.setTopRight({x:a.sx,y:a.sy}),t.setCanvasSize(r,n),r=a.sw,n=a.sh}var o={x:r>>i,y:n>>i},u=Object(_.a)(e.patchSize,o);if(t.setWidth((o.x/u.x<<i)*u.x|0),t.setHeight((o.y/u.y<<i)*u.y|0),t.getWidth()%u.x==0&&t.getHeight()%u.y==0)return!0;throw new Error("Image dimensions do not comply with the current settings: width (".concat(r,") and height (").concat(n,") must be a multiple of ").concat(u.x))}}}).call(this,r(28))},function(t,e){t.exports=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}},function(t,e,r){"use strict";r.d(e,"a",function(){return u});var n=r(1),i=r.n(n),a=r(0),o=r.n(a),u=function(){function t(e,r){i()(this,t),this._threshold=e,this._points=[],this._center={rad:0,x:0,y:0},this._pointMap={},r&&this.add(r)}return o()(t,[{key:"add",value:function(t){this._pointMap[t.id]||(this._pointMap[t.id]=t,this._points.push(t),this._center.rad=this._points.reduce(function(t,e){return t+e.rad},0)/this._points.length,this._center.x=Math.cos(this._center.rad),this._center.y=Math.sin(this._center.rad))}},{key:"fits",value:function(t){return Math.abs(t.point.x*this._center.x+t.point.y*this._center.y)>this._threshold}},{key:"points",get:function(){return this._points}}]),t}()},function(t,e,r){"use strict";r.d(e,"a",function(){return d});var n=r(1),i=r.n(n),a=r(0),o=r.n(a),u=r(13),s=-32767,c=-32766,l=0,f=1,h=2,d=function(){function t(e,r){i()(this,t),this.imageData=e.data,this.labelData=r.data,this.width=e.size.x,this.height=e.size.y,this.tracer=new u.b(e,r)}return o()(t,[{key:"rasterize",value:function(t){for(var e=[],r=0;r<400;r++)e[r]=0;e[0]=this.imageData[0];for(var n,i=null,a=0,o=1;o<this.height-1;o++)for(var u=0,h=e[0],d=1;d<this.width-1;d++){var v=o*this.width+d;if(0===this.labelData[v]){var g=this.imageData[v];if(g!==h)if(0===u){var _=a+1;e[_]=g,h=g;var y=this.tracer.contourTracing(o,d,_,g,s);if(null!==y){a++;var p={dir:l,index:u=_,firstVertex:y,nextPeer:i,insideContours:null};null!==i&&(i.previousPeer=p),i=p}}else{var m=this.tracer.contourTracing(o,d,c,g,u);if(null!==m){var b={dir:0===t?f:l,firstVertex:m,index:t,insideContours:null};for(n=i;null!==n&&n.index!==u;)n=n.nextPeer;null!==n&&(b.nextPeer=n.insideContours,null!==n.insideContours&&(n.insideContours.previousPeer=b),n.insideContours=b)}}else this.labelData[v]=u}else this.labelData[v]===c?(u=0,h=this.imageData[v]):this.labelData[v]===s?(u=0,h=e[0]):h=e[u=this.labelData[v]]}for(n=i;null!==n;)n.index=t,n=n.nextPeer;return{cc:i,count:a}}},{key:"drawContour",value:function(t,e){var r=t.getContext("2d");r.strokeStyle="red",r.fillStyle="red",r.lineWidth=1;for(var n=e,i=n&&n.insideContours;null!==n;){var a=i||n;switch(i=null!==i?i.nextPeer:(n=n.nextPeer)&&n.insideContours,a.dir){case l:r.strokeStyle="red";break;case f:r.strokeStyle="blue";break;case h:r.strokeStyle="green"}var o=a.firstVertex;r.beginPath(),r.moveTo(o.x,o.y);do{o=o.next,r.lineTo(o.x,o.y)}while(o!==a.firstVertex);r.stroke()}}}]),t}()},function(t,e,r){"use strict";e.a=function(t,e,r){"use asm";var n=new t.Uint8Array(r),i=e.size|0,a=t.Math.imul;function o(t,e){t=t|0;e=e|0;var r=0,a=0,o=0,u=0,s=0,c=0,l=0,f=0;for(r=1;(r|0)<(i-1|0);r=r+1|0){f=f+i|0;for(a=1;(a|0)<(i-1|0);a=a+1|0){u=f-i|0;s=f+i|0;c=a-1|0;l=a+1|0;o=(n[t+u+c|0]|0)+(n[t+u+l|0]|0)+(n[t+f+a|0]|0)+(n[t+s+c|0]|0)+(n[t+s+l|0]|0)|0;if((o|0)==(5|0)){n[e+f+a|0]=1}else{n[e+f+a|0]=0}}}return}function u(t,e,r){t=t|0;e=e|0;r=r|0;var o=0;o=a(i,i)|0;while((o|0)>0){o=o-1|0;n[r+o|0]=(n[t+o|0]|0)-(n[e+o|0]|0)|0}}function s(t,e,r){t=t|0;e=e|0;r=r|0;var o=0;o=a(i,i)|0;while((o|0)>0){o=o-1|0;n[r+o|0]=n[t+o|0]|0|(n[e+o|0]|0)|0}}function c(t){t=t|0;var e=0,r=0;r=a(i,i)|0;while((r|0)>0){r=r-1|0;e=(e|0)+(n[t+r|0]|0)|0}return e|0}function l(t,e){t=t|0;e=e|0;var r=0;r=a(i,i)|0;while((r|0)>0){r=r-1|0;n[t+r|0]=e}}function f(t,e){t=t|0;e=e|0;var r=0,a=0,o=0,u=0,s=0,c=0,l=0,f=0;for(r=1;(r|0)<(i-1|0);r=r+1|0){f=f+i|0;for(a=1;(a|0)<(i-1|0);a=a+1|0){u=f-i|0;s=f+i|0;c=a-1|0;l=a+1|0;o=(n[t+u+c|0]|0)+(n[t+u+l|0]|0)+(n[t+f+a|0]|0)+(n[t+s+c|0]|0)+(n[t+s+l|0]|0)|0;if((o|0)>(0|0)){n[e+f+a|0]=1}else{n[e+f+a|0]=0}}}return}function h(t,e){t=t|0;e=e|0;var r=0;r=a(i,i)|0;while((r|0)>0){r=r-1|0;n[e+r|0]=n[t+r|0]|0}}function d(t){t=t|0;var e=0,r=0;for(e=0;(e|0)<(i-1|0);e=e+1|0){n[t+e|0]=0;n[t+r|0]=0;r=r+i-1|0;n[t+r|0]=0;r=r+1|0}for(e=0;(e|0)<(i|0);e=e+1|0){n[t+r|0]=0;r=r+1|0}}function v(){var t=0,e=0,r=0,n=0,v=0,g=0;e=a(i,i)|0;r=e+e|0;n=r+e|0;l(n,0);d(t);do{o(t,e);f(e,r);u(t,r,r);s(n,r,n);h(e,t);v=c(t)|0;g=(v|0)==0|0}while(!g)}return{skeletonize:v}}},function(t,e){Math.imul||(Math.imul=function(t,e){var r=(4194303&t)*(e|=0);return 4290772992
/*!== 0*/&t&&(r+=(4290772992&t)*e|0),0|r})},function(t,e){t.exports=function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}},function(t,e){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e){function r(e,n){return t.exports=r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},r(e,n)}t.exports=r},function(t,e,r){var n=r(2);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=n(t)););return t}},function(t,e,r){var n=function(){return this||"object"==typeof self&&self}()||Function("return this")(),i=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,a=i&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,t.exports=r(27),i)n.regeneratorRuntime=a;else try{delete n.regeneratorRuntime}catch(t){n.regeneratorRuntime=void 0}},function(t,e){!function(e){"use strict";var r,n=Object.prototype,i=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag",c="object"==typeof t,l=e.regeneratorRuntime;if(l)c&&(t.exports=l);else{(l=e.regeneratorRuntime=c?t.exports:{}).wrap=b;var f="suspendedStart",h="suspendedYield",d="executing",v="completed",g={},_={};_[o]=function(){return this};var y=Object.getPrototypeOf,p=y&&y(y(D([])));p&&p!==n&&i.call(p,o)&&(_=p);var m=C.prototype=w.prototype=Object.create(_);k.prototype=m.constructor=C,C.constructor=k,C[s]=k.displayName="GeneratorFunction",l.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===k||"GeneratorFunction"===(e.displayName||e.name))},l.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,C):(t.__proto__=C,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(m),t},l.awrap=function(t){return{__await:t}},E(S.prototype),S.prototype[u]=function(){return this},l.AsyncIterator=S,l.async=function(t,e,r,n){var i=new S(b(t,e,r,n));return l.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},E(m),m[s]="Generator",m[o]=function(){return this},m.toString=function(){return"[object Generator]"},l.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},l.values=D,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,i){return u.type="throw",u.arg=t,e.next=n,i&&(e.method="next",e.arg=r),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;P(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:D(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),g}}}function b(t,e,r,n){var i=e&&e.prototype instanceof w?e:w,a=Object.create(i.prototype),o=new O(n||[]);return a._invoke=function(t,e,r){var n=f;return function(i,a){if(n===d)throw new Error("Generator is already running");if(n===v){if("throw"===i)throw a;return T()}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var u=R(o,r);if(u){if(u===g)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===f)throw n=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=d;var s=x(t,e,r);if("normal"===s.type){if(n=r.done?v:h,s.arg===g)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n=v,r.method="throw",r.arg=s.arg)}}}(t,r,o),a}function x(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}function w(){}function k(){}function C(){}function E(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function S(t){var e;this._invoke=function(r,n){function a(){return new Promise(function(e,a){!function e(r,n,a,o){var u=x(t[r],t,n);if("throw"!==u.type){var s=u.arg,c=s.value;return c&&"object"==typeof c&&i.call(c,"__await")?Promise.resolve(c.__await).then(function(t){e("next",t,a,o)},function(t){e("throw",t,a,o)}):Promise.resolve(c).then(function(t){s.value=t,a(s)},function(t){return e("throw",t,a,o)})}o(u.arg)}(r,n,e,a)})}return e=e?e.then(a,a):a()}}function R(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,R(t,e),"throw"===e.method))return g;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=x(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,g;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,g):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,g)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function D(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(i.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=r,e.done=!0,e};return a.next=a}}return{next:T}}function T(){return{value:r,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(e,r,n){"use strict";n.r(r);n(19);var i=n(1),a=n.n(i),o=n(0),u=n.n(o),s=n(9),c=function(){function t(e){a()(this,t),this._config=e,this._canvas=document.createElement("canvas"),this._context=this._canvas.getContext("2d"),this._results=[],this._capacity=e.capacity||20,this._capture=!0===e.capture}return u()(t,[{key:"_contains",value:function(t,e){return!!e&&e.some(function(e){return Object.keys(e).every(function(r){return e[r]===t[r]})})}},{key:"_passesFilter",value:function(t,e){return"function"!=typeof e||e(t)}},{key:"_matchesConstraints",value:function(t){return t&&this._capacity&&!this._contains(t,this._config.blacklist)&&this._passesFilter(t,this._config.filter)}},{key:"addResult",value:function(t,e,r,n){if(this._matchesConstraints(n)){var i={};this._capacity--,i.codeResult=n,this._capture&&(this._canvas.width=e,this._canvas.height=r,s.a.drawImage(t,e,r,this._context),i.frame=this._canvas.toDataURL()),this._results.push(i)}}},{key:"getResults",value:function(){return this._results}}]),t}(),l=function(){var t={};function e(e){return t[e]||(t[e]={subscribers:[]}),t[e]}function r(t,e){t.async?setTimeout(function(){t.callback(e)},4):t.callback(e)}function n(t,r,n){var i;if("function"==typeof r)i={callback:r,async:n};else if(!(i=r).callback)throw"Callback was not specified on options";e(t).subscribers.push(i)}return{subscribe:function(t,e,r){return n(t,e,r)},publish:function(t,n){var i=e(t),a=i.subscribers;a.filter(function(t){return!!t.once}).forEach(function(t){return r(t,n)}),i.subscribers=a.filter(function(t){return!t.once}),i.subscribers.forEach(function(t){return r(t,n)})},once:function(t,e,r){n(t,{callback:e,async:r,once:!0})},unsubscribe:function(r,n){if(r){var i=e(r);i.subscribers=i&&n?i.subscribers.filter(function(t){return t.callback!==n}):[]}else t={}}}}(),f=n(5),h=n(10),d=n.n(h);function v(){for(var t=function(t){return t&&"object"===d()(t)},e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return r.reduce(function(e,r){return r&&Object.keys(r).forEach(function(n){var i=e[n],a=r[n];Array.isArray(i)&&Array.isArray(a)?e[n]=a:t(i)&&t(a)?e[n]=v(i,a):e[n]=a}),e},{})}var g={inputStream:{name:"Live",type:"LiveStream",constraints:{width:640,height:480,facingMode:"environment"},area:{top:"0%",right:"0%",left:"0%",bottom:"0%"},singleChannel:!1},locate:!0,numOfWorkers:0,decoder:{readers:["code_128_reader"],debug:{drawBoundingBox:!1,showFrequency:!1,drawScanline:!1,showPattern:!1}},locator:{halfSample:!0,patchSize:"medium",debug:{showCanvas:!1,showPatches:!1,showFoundPatches:!1,showSkeleton:!1,showLabels:!1,showPatchLabels:!1,showRemainingPatchLabels:!1,boxFromPatches:{showTransformed:!1,showTransformedBox:!1,showBB:!1}}}},_=n(11),y=n.n(_),p={},m={UP:1,DOWN:-1};p.getBarcodeLine=function(t,e,r){var n,i,a=0|e.x,o=0|e.y,u=0|r.x,s=0|r.y,c=Math.abs(s-o)>Math.abs(u-a),l=[],f=t.data,h=t.size.x,d=255,v=0;function g(t,e){i=f[e*h+t],d=i<d?i:d,v=i>v?i:v,l.push(i)}c&&(n=a,a=o,o=n,n=u,u=s,s=n),a>u&&(n=a,a=u,u=n,n=o,o=s,s=n);for(var _=u-a,y=Math.abs(s-o),p=_/2|0,m=o,b=o<s?1:-1,x=a;x<u;x++)c?g(m,x):g(x,m),(p-=y)<0&&(m+=b,p+=_);return{line:l,min:d,max:v}},p.toBinaryLine=function(t){var e=t.min,r=t.max,n=t.line,i=e+(r-e)/2,a=[],o=(r-e)/12,u=-o,s=n[0]>i?m.UP:m.DOWN;a.push({pos:0,val:n[0]});for(var c=0;c<n.length-2;c++){var l=n[c+1]-n[c],f=n[c+2]-n[c+1],h=void 0;s!==(h=l+f<u&&n[c+1]<1.5*i?m.DOWN:l+f>o&&n[c+1]>.5*i?m.UP:s)&&(a.push({pos:c,val:n[c]}),s=h)}a.push({pos:n.length,val:n[n.length-1]});for(var d=a[0].pos;d<a[1].pos;d++)n[d]=n[d]>i?0:1;for(var v=1;v<a.length-1;v++){o=a[v+1].val>a[v].val?a[v].val+(a[v+1].val-a[v].val)/3*2|0:a[v+1].val+(a[v].val-a[v+1].val)/3|0;for(var g=a[v].pos;g<a[v+1].pos;g++)n[g]=n[g]>o?0:1}return{line:n,threshold:o}},p.debug={printFrequency:function(t,e){var r=e.getContext("2d");e.width=t.length,e.height=256,r.beginPath(),r.strokeStyle="blue";for(var n=0;n<t.length;n++)r.moveTo(n,255),r.lineTo(n,255-t[n]);r.stroke(),r.closePath()},printPattern:function(t,e){var r=e.getContext("2d");e.width=t.length,r.fillColor="black";for(var n=0;n<t.length;n++)1===t[n]&&r.fillRect(n,0,1,100)}};var b=p,x=n(3),w=n.n(x),k=n(2),C=n.n(k),E=n(4),S=n.n(E),R=1,A=-1,P=function(){function t(e,r){a()(this,t),this._format="unknown",this._row=[],this.config=e||{},this.supplements=r}return u()(t,[{key:"SINGLE_CODE_ERROR",get:function(){return this._singleCodeError}},{key:"AVERAGE_CODE_ERROR",get:function(){return this._averageCodeError}},{key:"FORMAT",get:function(){return this._format}}],[{key:"Exception",get:function(){return{StartNotFoundException:"Start-Info was not found!",CodeNotFoundException:"Code could not be found!",PatternNotFoundException:"Pattern could not be found!"}}}]),u()(t,[{key:"_nextUnset",value:function(t,e){for(var r=e||0;r<t.length;r++)if(!t[r])return r;return t.length}},{key:"_matchPattern",value:function(t,e,r){var n=0,i=0,a=0;r=r||this.SINGLE_CODE_ERROR||1;for(var o=0;o<t.length;o++)i+=t[o],a+=e[o];if(i<a)return Number.MAX_VALUE;var u=i/a;r*=u;for(var s=0;s<t.length;s++){var c=t[s],l=e[s]*u,f=Math.abs(c-l)/l;if(f>r)return Number.MAX_VALUE;n+=f}return n/a}},{key:"_nextSet",value:function(t,e){for(var r=e||0;r<t.length;r++)if(t[r])return r;return t.length}},{key:"_correctBars",value:function(t,e,r){for(var n=r.length,i=0;n--;)(i=t[r[n]]*(1-(1-e)/2))>1&&(t[r[n]]=i)}},{key:"decodePattern",value:function(t){this._row=t;var e=this._decode();return null===e?(this._row.reverse(),(e=this._decode())&&(e.direction=A,e.start=this._row.length-e.start,e.end=this._row.length-e.end)):e.direction=R,e&&(e.format=this.FORMAT),e}},{key:"_matchRange",value:function(t,e,r){for(var n=t<0?0:t;n<e;n++)if(this._row[n]!==r)return!1;return!0}},{key:"_fillCounters",value:function(t,e,r){var n=[],i=0;r=void 0===r||r,t=void 0!==t?t:this._nextUnset(this._row),e=e||this._row.length,n[i]=0;for(var a=t;a<e;a++)this._row[a]^r?n[i]++:(n[++i]=1,r=!r);return n}},{key:"_toCounters",value:function(t,e){var r=e.length,n=this._row.length,i=!this._row[t],a=0;e.fill(0);for(var o=t;o<n;o++)if(this._row[o]^i)e[a]++;else{if(++a===r)break;e[a]=1,i=!i}return e}}]),t}(),O=[[2,1,2,2,2,2],[2,2,2,1,2,2],[2,2,2,2,2,1],[1,2,1,2,2,3],[1,2,1,3,2,2],[1,3,1,2,2,2],[1,2,2,2,1,3],[1,2,2,3,1,2],[1,3,2,2,1,2],[2,2,1,2,1,3],[2,2,1,3,1,2],[2,3,1,2,1,2],[1,1,2,2,3,2],[1,2,2,1,3,2],[1,2,2,2,3,1],[1,1,3,2,2,2],[1,2,3,1,2,2],[1,2,3,2,2,1],[2,2,3,2,1,1],[2,2,1,1,3,2],[2,2,1,2,3,1],[2,1,3,2,1,2],[2,2,3,1,1,2],[3,1,2,1,3,1],[3,1,1,2,2,2],[3,2,1,1,2,2],[3,2,1,2,2,1],[3,1,2,2,1,2],[3,2,2,1,1,2],[3,2,2,2,1,1],[2,1,2,1,2,3],[2,1,2,3,2,1],[2,3,2,1,2,1],[1,1,1,3,2,3],[1,3,1,1,2,3],[1,3,1,3,2,1],[1,1,2,3,1,3],[1,3,2,1,1,3],[1,3,2,3,1,1],[2,1,1,3,1,3],[2,3,1,1,1,3],[2,3,1,3,1,1],[1,1,2,1,3,3],[1,1,2,3,3,1],[1,3,2,1,3,1],[1,1,3,1,2,3],[1,1,3,3,2,1],[1,3,3,1,2,1],[3,1,3,1,2,1],[2,1,1,3,3,1],[2,3,1,1,3,1],[2,1,3,1,1,3],[2,1,3,3,1,1],[2,1,3,1,3,1],[3,1,1,1,2,3],[3,1,1,3,2,1],[3,3,1,1,2,1],[3,1,2,1,1,3],[3,1,2,3,1,1],[3,3,2,1,1,1],[3,1,4,1,1,1],[2,2,1,4,1,1],[4,3,1,1,1,1],[1,1,1,2,2,4],[1,1,1,4,2,2],[1,2,1,1,2,4],[1,2,1,4,2,1],[1,4,1,1,2,2],[1,4,1,2,2,1],[1,1,2,2,1,4],[1,1,2,4,1,2],[1,2,2,1,1,4],[1,2,2,4,1,1],[1,4,2,1,1,2],[1,4,2,2,1,1],[2,4,1,2,1,1],[2,2,1,1,1,4],[4,1,3,1,1,1],[2,4,1,1,1,2],[1,3,4,1,1,1],[1,1,1,2,4,2],[1,2,1,1,4,2],[1,2,1,2,4,1],[1,1,4,2,1,2],[1,2,4,1,1,2],[1,2,4,2,1,1],[4,1,1,2,1,2],[4,2,1,1,1,2],[4,2,1,2,1,1],[2,1,2,1,4,1],[2,1,4,1,2,1],[4,1,2,1,2,1],[1,1,1,1,4,3],[1,1,1,3,4,1],[1,3,1,1,4,1],[1,1,4,1,1,3],[1,1,4,3,1,1],[4,1,1,1,1,3],[4,1,1,3,1,1],[1,1,3,1,4,1],[1,1,4,1,3,1],[3,1,1,1,4,1],[4,1,1,1,3,1],[2,1,1,4,1,2],[2,1,1,2,1,4],[2,1,1,2,3,2],[2,3,3,1,1,1,2]],D=[0,2,4],T=[1,3,5],z=function(t){function e(){var t;return a()(this,e),(t=w()(this,C()(e).call(this)))._format="code_128",t._singleCodeError=.64,t._averageCodeError=.3,t}return S()(e,t),u()(e,[{key:"_decodeCode",value:function(t,e){for(var r=[0,0,0,0,0,0],n=t,i={error:Number.MAX_VALUE,code:-1,start:t,end:t,correction:{bar:1,space:1}},a=this.AVERAGE_CODE_ERROR,o=!this._row[n],u=0,s=n;s<this._row.length;s++)if(this._row[s]^o)r[u]++;else{if(u===r.length-1){e&&this._correct(r,e);for(var c=0;c<O.length;c++){var l=this._matchPattern(r,O[c]);l<i.error&&(i.code=c,i.error=l)}if(i.end=s,-1===i.code||i.error>a)return null;var f=O[i.code];return f&&(i.correction.bar=this.calculateCorrection(f,r,D),i.correction.space=this.calculateCorrection(f,r,T)),i}r[++u]=1,o=!o}return null}},{key:"_correct",value:function(t,e){this._correctBars(t,e.bar,D),this._correctBars(t,e.space,T)}},{key:"_findStart",value:function(){for(var t,e=[0,0,0,0,0,0],r=this._nextSet(this._row),n={error:Number.MAX_VALUE,code:-1,start:0,end:0,correction:{bar:1,space:1}},i=this.AVERAGE_CODE_ERROR,a=!1,o=0,u=r;u<this._row.length;u++)if(this._row[u]^a)e[o]++;else{if(o===e.length-1){t=0;for(var s=0;s<e.length;s++)t+=e[s];for(var c=103;c<=105;c++){var l=this._matchPattern(e,O[c]);l<n.error&&(n.code=c,n.error=l)}if(n.error<i)return n.start=u-t,n.end=u,n.correction.bar=this.calculateCorrection(O[n.code],e,D),n.correction.space=this.calculateCorrection(O[n.code],e,T),n;for(var f=0;f<4;f++)e[f]=e[f+2];e[4]=0,e[5]=0,o--}else o++;e[o]=1,a=!a}return null}},{key:"_decode",value:function(){var t,e,r=[],n=this._findStart(),i=null,a=!1,o=0,u=0,s=[],c=[],l=!1,f=!0;if(null===n)return null;switch(i={code:n.code,start:n.start,end:n.end,correction:{bar:n.correction.bar,space:n.correction.space}},c.push(i),u=i.code,i.code){case 103:t=101;break;case 104:t=100;break;case 105:t=99;break;default:return null}for(;!a;){if(e=l,l=!1,null!==(i=this._decodeCode(i.end,i.correction)))switch(106!==i.code&&(f=!0),106!==i.code&&(s.push(i.code),u+=++o*i.code),c.push(i),t){case 101:if(i.code<64)r.push(String.fromCharCode(32+i.code));else if(i.code<96)r.push(String.fromCharCode(i.code-64));else switch(106!==i.code&&(f=!1),i.code){case 98:l=!0,t=100;break;case 100:t=100;break;case 99:t=99;break;case 106:a=!0}break;case 100:if(i.code<96)r.push(String.fromCharCode(32+i.code));else switch(106!==i.code&&(f=!1),i.code){case 98:l=!0,t=101;break;case 101:t=101;break;case 99:t=99;break;case 106:a=!0}break;case 99:if(i.code<100)r.push(i.code<10?"0"+i.code:i.code);else switch(106!==i.code&&(f=!1),i.code){case 101:t=101;break;case 100:t=100;break;case 106:a=!0}}else a=!0;e&&(t=101===t?100:101)}return null===i?null:(i.end=this._nextUnset(this._row,i.end),this._verifyTrailingWhitespace(i)?(u-=o*s[s.length-1])%103!==s[s.length-1]?null:r.length?(f&&r.splice(r.length-1,1),{code:r.join(""),start:n.start,end:i.end,codeset:t,startInfo:n,decodedCodes:c,endInfo:i}):null:null)}},{key:"_verifyTrailingWhitespace",value:function(t){var e=t.end+(t.end-t.start)/2;return e<this._row.length&&this._matchRange(t.end,e,0)?t:null}},{key:"calculateCorrection",value:function(t,e,r){for(var n=0,i=0,a=r.length;a--;)i+=t[r[a]],n+=e[r[a]];return i/n}}]),e}(P),L=y()("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. *$/+%").map(function(t){return t.charCodeAt(0)}),M=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,148,168,162,138,42],j=function(t){function e(){var t;return a()(this,e),(t=w()(this,C()(e).call(this)))._format="code_39",t}return S()(e,t),u()(e,[{key:"_decode",value:function(){var t=this._findStart();if(!t)return null;var e,r,n=[],i=[0,0,0,0,0,0,0,0,0],a=this._nextSet(this._row,t.end);do{i=this._toCounters(a,i);var o=this._toPattern(i);if(o<0)return null;if((e=this._patternToChar(o))<0)return null;n.push(e),r=a,a+=i.reduce(function(t,e){return t+e},0),a=this._nextSet(this._row,a)}while("*"!==e);return n.pop(),n.length&&this._verifyTrailingWhitespace(r,a,i)?{code:n.join(""),start:t.start,end:a,startInfo:t,decodedCodes:n}:null}},{key:"_verifyTrailingWhitespace",value:function(t,e,r){var n=r.reduce(function(t,e){return t+e},0);return 3*(e-t-n)>=n}},{key:"_patternToChar",value:function(t){for(var e=0;e<M.length;e++)if(M[e]===t)return String.fromCharCode(L[e]);return-1}},{key:"_findNextWidth",value:function(t,e){for(var r=Number.MAX_VALUE,n=0;n<t.length;n++)t[n]<r&&t[n]>e&&(r=t[n]);return r}},{key:"_toPattern",value:function(t){for(var e,r=t.length,n=0,i=r,a=0;i>3;){n=this._findNextWidth(t,n),i=0,e=0;for(var o=0;o<r;o++)t[o]>n&&(e|=1<<r-1-o,i++,a+=t[o]);if(3===i){for(var u=0;u<r&&i>0;u++)if(t[u]>n&&(i--,2*t[u]>=a))return-1;return e}}return-1}},{key:"_findStart",value:function(){for(var t,e=this._nextSet(this._row),r=e,n=[0,0,0,0,0,0,0,0,0],i=0,a=!1,o=e;o<this._row.length;o++)if(this._row[o]^a)n[i]++;else{if(i===n.length-1){if(148===this._toPattern(n)&&(t=0|Math.max(0,r-(o-r)/4),this._matchRange(t,r,0)))return{start:r,end:o};r+=n[0]+n[1];for(var u=0;u<7;u++)n[u]=n[u+2];n[7]=0,n[8]=0,i--}else i++;n[i]=1,a=!a}return null}}]),e}(P),I=n(7),W=n.n(I),U=function(t){function e(){var t;return a()(this,e),(t=w()(this,C()(e).call(this)))._format="code_39_vin",t}return S()(e,t),u()(e,[{key:"_decode",value:function(){var t=W()(C()(e.prototype),"_decode",this).call(this);if(!t)return null;var r=t.code;return r?(r=r.replace(/[IOQ]/g,""),/[A-Z0-9]{17}/.test(r)&&this._checkChecksum(r)?(t.code=r,t):null):null}},{key:"_checkChecksum",value:function(t){return!!t}}]),e}(j),N=y()("0123456789-$:/.+ABCD").map(function(t){return t.charCodeAt(0)}),F=[3,6,9,96,18,66,33,36,48,72,12,24,69,81,84,21,26,41,11,14],B=[26,41,11,14],V=function(t){function e(){var t;return a()(this,e),(t=w()(this,C()(e).call(this)))._format="codabar",t._counters=[],t}return S()(e,t),u()(e,[{key:"_decode",value:function(){this._counters=this._fillCounters();var t=this._findStart();if(!t)return null;var e,r=[],n=t.startCounter;do{if((e=this._toPattern(n))<0)return null;var i=this._patternToChar(e);if(i<0)return null;if(r.push(i),n+=8,r.length>1&&B.some(function(t){return t===e}))break}while(n<this._counters.length);if(r.length-2<4||!B.some(function(t){return t===e}))return null;if(!this._verifyWhitespace(t.startCounter,n-8))return null;if(!this._validateResult(r,t.startCounter))return null;n=n>this._counters.length?this._counters.length:n;var a=t.start+this._sumCounters(t.startCounter,n-8);return{code:r.join(""),start:t.start,end:a,startInfo:t,decodedCodes:r}}},{key:"_verifyWhitespace",value:function(t,e){return(t-1<=0||this._counters[t-1]>=this._calculatePatternLength(t)/2)&&(e+8>=this._counters.length||this._counters[e+7]>=this._calculatePatternLength(e)/2)}},{key:"_calculatePatternLength",value:function(t){for(var e=0,r=t;r<t+7;r++)e+=this._counters[r];return e}},{key:"_thresholdResultPattern",value:function(t,e){for(var r={space:{narrow:{size:0,counts:0,min:0,max:Number.MAX_VALUE},wide:{size:0,counts:0,min:0,max:Number.MAX_VALUE}},bar:{narrow:{size:0,counts:0,min:0,max:Number.MAX_VALUE},wide:{size:0,counts:0,min:0,max:Number.MAX_VALUE}}},n=e,i=0;i<t.length;i++){for(var a=this._charToPattern(t[i]),o=6;o>=0;o--){var u=2==(1&o)?r.bar:r.space,s=1==(1&a)?u.wide:u.narrow;s.size+=this._counters[n+o],s.counts++,a>>=1}n+=8}return["space","bar"].forEach(function(t){var e=r[t];e.wide.min=Math.floor((e.narrow.size/e.narrow.counts+e.wide.size/e.wide.counts)/2),e.narrow.max=Math.ceil(e.wide.min),e.wide.max=Math.ceil((2*e.wide.size+1.5)/e.wide.counts)}),r}},{key:"_charToPattern",value:function(t){for(var e=t.charCodeAt(0),r=0;r<N.length;r++)if(N[r]===e)return F[r];return 0}},{key:"_validateResult",value:function(t,e){for(var r=this._thresholdResultPattern(t,e),n=e,i=0;i<t.length;i++){for(var a=this._charToPattern(t[i]),o=6;o>=0;o--){var u=0==(1&o)?r.bar:r.space,s=1==(1&a)?u.wide:u.narrow,c=this._counters[n+o];if(c<s.min||c>s.max)return!1;a>>=1}n+=8}return!0}},{key:"_patternToChar",value:function(t){for(var e=0;e<F.length;e++)if(F[e]===t)return String.fromCharCode(N[e]);return-1}},{key:"_computeAlternatingThreshold",value:function(t,e){for(var r=Number.MAX_VALUE,n=0,i=t;i<e;i+=2){var a=this._counters[i];a>n&&(n=a),a<r&&(r=a)}return(r+n)/2|0}},{key:"_toPattern",value:function(t){var e=t+7;if(e>this._counters.length)return-1;for(var r=this._computeAlternatingThreshold(t,e),n=this._computeAlternatingThreshold(t+1,e),i=64,a=0,o=0;o<7;o++){var u=0==(1&o)?r:n;this._counters[t+o]>u&&(a|=i),i>>=1}return a}},{key:"_sumCounters",value:function(t,e){for(var r=0,n=t;n<e;n++)r+=this._counters[n];return r}},{key:"_findStart",value:function(){for(var t=this,e=this._nextUnset(this._row),r=function(r){var n=t._toPattern(r);if(-1!==n&&B.some(function(t){return t===n})){var i=(e+=t._sumCounters(0,r))+t._sumCounters(r,r+8);return{v:{start:e,end:i,startCounter:r,endCounter:r+8}}}},n=1;n<this._counters.length;n++){var i=r(n);if("object"===d()(i))return i.v}return null}}]),e}(P),G=n(15),H=n.n(G);function X(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}var q,Q=[1,1,2],Y=[[3,2,1,1],[2,2,2,1],[2,1,2,2],[1,4,1,1],[1,1,3,2],[1,2,3,1],[1,1,1,4],[1,3,1,2],[1,2,1,3],[3,1,1,2],[1,1,2,3],[1,2,2,2],[2,2,1,2],[1,1,4,1],[2,3,1,1],[1,3,2,1],[4,1,1,1],[2,1,3,1],[3,1,2,1],[2,1,1,3]],Z=function(t){function e(t,r){var n;return a()(this,e),(n=w()(this,C()(e).call(this,v({supplements:[]},t),r)))._format="ean_13",n._singleCodeError=.7,n._averageCodeError=.48,n}return S()(e,t),u()(e,[{key:"CODE_L_START",get:function(){return 0}},{key:"CODE_G_START",get:function(){return 10}},{key:"START_PATTERN",get:function(){return[1,1,1]}},{key:"STOP_PATTERN",get:function(){return[1,1,1]}},{key:"MIDDLE_PATTERN",get:function(){return[1,1,1,1,1]}},{key:"CODE_FREQUENCY",get:function(){return[0,11,13,14,19,25,28,21,22,26]}}]),u()(e,[{key:"_decodeCode",value:function(t,e){var r=[0,0,0,0],n=t,i={error:Number.MAX_VALUE,code:-1,start:t,end:t},a=this.AVERAGE_CODE_ERROR,o=!this._row[n],u=0;e||(e=Y.length);for(var s=n;s<this._row.length;s++)if(this._row[s]^o)r[u]++;else{if(u===r.length-1){for(var c=0;c<e;c++){var l=this._matchPattern(r,Y[c]);l<i.error&&(i.code=c,i.error=l)}return i.end=s,i.error>a?null:i}r[++u]=1,o=!o}return null}},{key:"_findPattern",value:function(t,e,r,n,i){var a,o=[],u={error:Number.MAX_VALUE,code:-1,start:0,end:0},s=0;e||(e=this._nextSet(this._row)),void 0===r&&(r=!1),void 0===n&&(n=!0),void 0===i&&(i=this.AVERAGE_CODE_ERROR);for(var c=0;c<t.length;c++)o[c]=0;for(var l=e;l<this._row.length;l++)if(this._row[l]^r)o[s]++;else{if(s===o.length-1){a=0;for(var f=0;f<o.length;f++)a+=o[f];var h=this._matchPattern(o,t);if(h<i)return u.error=h,u.start=l-a,u.end=l,u;if(!n)return null;for(var d=0;d<o.length-2;d++)o[d]=o[d+2];o[o.length-2]=0,o[o.length-1]=0,s--}else s++;o[s]=1,r=!r}return null}},{key:"_findStart",value:function(){for(var t,e=this._nextSet(this._row);!t;){if(!(t=this._findPattern(this.START_PATTERN,e)))return null;var r=t.start-(t.end-t.start);if(r>=0&&this._matchRange(r,t.start,0))return t;e=t.end,t=null}return null}},{key:"_verifyTrailingWhitespace",value:function(t){var e=t.end+(t.end-t.start);return e<this._row.length&&this._matchRange(t.end,e,0)?t:null}},{key:"_findEnd",value:function(t,e){var r=this._findPattern(this.STOP_PATTERN,t,e,!1);return null!==r?this._verifyTrailingWhitespace(r):null}},{key:"_calculateFirstDigit",value:function(t){for(var e=0;e<this.CODE_FREQUENCY.length;e++)if(t===this.CODE_FREQUENCY[e])return e;return null}},{key:"_decodePayload",value:function(t,e,r){for(var n=0,i=0;i<6;i++){if(!(t=this._decodeCode(t.end)))return null;t.code>=this.CODE_G_START?(t.code-=this.CODE_G_START,n|=1<<5-i):n|=0<<5-i,e.push(t.code),r.push(t)}var a=this._calculateFirstDigit(n);if(null===a)return null;if(e.unshift(a),null===(t=this._findPattern(this.MIDDLE_PATTERN,t.end,!0,!1)))return null;r.push(t);for(var o=0;o<6;o++){if(!(t=this._decodeCode(t.end,this.CODE_G_START)))return null;r.push(t),e.push(t.code)}return t}},{key:"_decode",value:function(){var t=[],e=[],r={},n=this._findStart();if(!n)return null;var i={code:n.code,start:n.start,end:n.end};if(e.push(i),!(i=this._decodePayload(i,t,e)))return null;if(!(i=this._findEnd(i.end,!1)))return null;if(e.push(i),!this._checksum(t))return null;if(this.supplements.length>0){var a=this._decodeExtensions(i.end);if(!a)return null;var o=a.decodedCodes[a.decodedCodes.length-1],u={start:o.start+((o.end-o.start)/2|0),end:o.end};if(!this._verifyTrailingWhitespace(u))return null;r={supplement:a,code:t.join("")+a.code}}return function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?X(r,!0).forEach(function(e){H()(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):X(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({code:t.join(""),start:n.start,end:i.end,codeset:"",startInfo:n,decodedCodes:e},r)}},{key:"_decodeExtensions",value:function(t){var e=this._nextSet(this._row,t),r=this._findPattern(Q,e,!1,!1);if(null===r)return null;for(var n=0;n<this.supplements.length;n++){var i=this.supplements[n].decode(this._row,r.end);if(null!==i)return{code:i.code,start:e,startInfo:r,end:i.end,codeset:"",decodedCodes:i.decodedCodes}}return null}},{key:"_checksum",value:function(t){for(var e=0,r=t.length-2;r>=0;r-=2)e+=t[r];e*=3;for(var n=t.length-1;n>=0;n-=2)e+=t[n];return e%10==0}}]),e}(P),K=function(t){function e(t,r){var n;return a()(this,e),(n=w()(this,C()(e).call(this,t,r)))._format="ean_8",n}return S()(e,t),u()(e,[{key:"_decodePayload",value:function(t,e,r){for(var n=0;n<4;n++){if(!(t=this._decodeCode(t.end,this.CODE_G_START)))return null;e.push(t.code),r.push(t)}if(null===(t=this._findPattern(this.MIDDLE_PATTERN,t.end,!0,!1)))return null;r.push(t);for(var i=0;i<4;i++){if(!(t=this._decodeCode(t.end,this.CODE_G_START)))return null;r.push(t),e.push(t.code)}return t}}]),e}(Z),J=function(t){function e(t,r){var n;return a()(this,e),(n=w()(this,C()(e).call(this,t,r)))._format="ean_2",n}return S()(e,t),u()(e,[{key:"decode",value:function(t,e){var r,n=t.length,i=[],a=[],o=e,u=0;this._row=t;for(var s=0;s<2&&o<n;s++){if(!(r=this._decodeCode(o)))return null;a.push(r),i.push(r.code%10),r.code>=this.CODE_G_START&&(u|=1<<1-s),1!==s&&(o=this._nextSet(this._row,r.end),o=this._nextUnset(this._row,o))}return 2!==i.length||parseInt(i.join(""))%4!==u?null:{code:i.join(""),decodedCodes:a,end:r.end}}}]),e}(Z),$=function(t){function e(t,r){var n;return a()(this,e),(n=w()(this,C()(e).call(this,t,r)))._format="ean_5",n}return S()(e,t),u()(e,[{key:"CHECK_DIGIT_ENCODINGS",get:function(){return[24,20,18,17,12,6,3,10,9,5]}}]),u()(e,[{key:"decode",value:function(t,e){var r,n=t.length,i=[],a=[],o=0,u=e;this._row=t;for(var s=0;s<5&&u<n;s++){if(!(r=this._decodeCode(u)))return null;a.push(r),i.push(r.code%10),r.code>=this.CODE_G_START&&(o|=1<<4-s),4!==s&&(u=this._nextSet(this._row,r.end),u=this._nextUnset(this._row,u))}return 5!==i.length?null:this._extensionChecksum(i)!==this._determineCheckDigit(o)?null:{code:i.join(""),decodedCodes:a,end:r.end}}},{key:"_determineCheckDigit",value:function(t){for(var e=0;e<10;e++)if(t===this.CHECK_DIGIT_ENCODINGS[e])return e;return null}},{key:"_extensionChecksum",value:function(t){for(var e=t.length,r=0,n=e-2;n>=0;n-=2)r+=t[n];r*=3;for(var i=e-1;i>=0;i-=2)r+=t[i];return(r*=3)%10}}]),e}(Z),tt=function(t){function e(t,r){var n;return a()(this,e),(n=w()(this,C()(e).call(this,t,r)))._format="upc_a",n}return S()(e,t),u()(e,[{key:"_decode",value:function(){var t=W()(C()(e.prototype),"_decode",this).call(this);return t&&t.code&&13===t.code.length&&"0"===t.code.charAt(0)?(t.code=t.code.substring(1),t):null}}]),e}(Z),et=function(t){function e(t,r){var n;return a()(this,e),(n=w()(this,C()(e).call(this,t,r)))._format="upc_e",n}return S()(e,t),u()(e,[{key:"CODE_FREQUENCY",get:function(){return[[56,52,50,49,44,38,35,42,41,37],[7,11,13,14,19,25,28,21,22,26]]}},{key:"STOP_PATTERN",get:function(){return[1/6*7,1/6*7,1/6*7,1/6*7,1/6*7,1/6*7]}}]),u()(e,[{key:"_decodePayload",value:function(t,e,r){for(var n=0,i=0;i<6;i++){if(!(t=this._decodeCode(t.end)))return null;t.code>=this.CODE_G_START&&(t.code=t.code-this.CODE_G_START,n|=1<<5-i),e.push(t.code),r.push(t)}return this._determineParity(n,e)?t:null}},{key:"_determineParity",value:function(t,e){for(var r=0;r<this.CODE_FREQUENCY.length;r++)for(var n=0;n<this.CODE_FREQUENCY[r].length;n++)if(t===this.CODE_FREQUENCY[r][n])return e.unshift(r),e.push(n),!0;return!1}},{key:"_convertToUPCA",value:function(t){var e=t[t.length-2],r=[t[0]];return(r=e<=2?r.concat(t.slice(1,3)).concat([e,0,0,0,0]).concat(t.slice(3,6)):3===e?r.concat(t.slice(1,4)).concat([0,0,0,0,0]).concat(t.slice(4,6)):4===e?r.concat(t.slice(1,5)).concat([0,0,0,0,0,t[5]]):r.concat(t.slice(1,6)).concat([0,0,0,0,e])).push(t[t.length-1]),r}},{key:"_checksum",value:function(t){return W()(C()(e.prototype),"_checksum",this).call(this,this._convertToUPCA(t))}},{key:"_findEnd",value:function(t,r){return!0,W()(C()(e.prototype),"_findEnd",this).call(this,t,!0)}},{key:"_verifyTrailingWhitespace",value:function(t){var e=t.end+(t.end-t.start)/2;return e<this._row.length&&this._matchRange(t.end,e,0)?t:null}}]),e}(Z),rt=[1,1,1,1],nt=[1,1,3],it=[[1,1,3,3,1],[3,1,1,1,3],[1,3,1,1,3],[3,3,1,1,1],[1,1,3,1,3],[3,1,3,1,1],[1,3,3,1,1],[1,1,1,3,3],[3,1,1,3,1],[1,3,1,3,1]],at=function(t){function e(t){var r;return a()(this,e),(r=w()(this,C()(e).call(this,v({normalizeBarSpaceWidth:!1},t))))._format="i2of5",r._barSpaceRatio=[1,1],r.config.normalizeBarSpaceWidth?(r._singleCodeError=.38,r._averageCodeError=.09):(r._singleCodeError=.78,r._averageCodeError=.38),r}return S()(e,t),u()(e,[{key:"_matchPattern",value:function(t,r){if(this.config.normalizeBarSpaceWidth){for(var n=[0,0],i=[0,0],a=[0,0],o=0;o<t.length;o++)n[o%2]+=t[o],i[o%2]+=r[o];a[0]=i[0]/n[0],a[1]=i[1]/n[1],a[0]=Math.max(Math.min(a[0],5),.2),a[1]=Math.max(Math.min(a[1],5),.2),this._barSpaceRatio=a;for(var u=0;u<t.length;u++)t[u]*=this._barSpaceRatio[u%2]}return W()(C()(e.prototype),"_matchPattern",this).call(this,t,r)}},{key:"_findPattern",value:function(t,e,r,n){var i=[],a={error:Number.MAX_VALUE,code:-1,start:0,end:0},o=this.AVERAGE_CODE_ERROR,u=0;r=r||!1,n=n||!1,e||(e=this._nextSet(this._row));for(var s=0;s<t.length;s++)i[s]=0;for(var c=e;c<this._row.length;c++)if(this._row[c]^r)i[u]++;else{if(u===i.length-1){for(var l=0,f=0;f<i.length;f++)l+=i[f];var h=this._matchPattern(i,t);if(h<o)return a.error=h,a.start=c-l,a.end=c,a;if(!n)return null;for(var d=0;d<i.length-2;d++)i[d]=i[d+2];i[i.length-2]=0,i[i.length-1]=0,u--}else u++;i[u]=1,r=!r}return null}},{key:"_findStart",value:function(){for(var t,e=this._nextSet(this._row);!t;){if(!(t=this._findPattern(rt,e,!1,!0)))return null;var r=t.end-t.start>>2,n=t.start-10*r;if(n>=0&&this._matchRange(n,t.start,0))return t;e=t.end,t=null}return null}},{key:"_verifyTrailingWhitespace",value:function(t){var e=t.end+(t.end-t.start)/2;return e<this._row.length&&this._matchRange(t.end,e,0)?t:null}},{key:"_findEnd",value:function(){this._row.reverse();var t=this._findPattern(nt);if(this._row.reverse(),null===t)return null;var e=t.start;return t.start=this._row.length-t.end,t.end=this._row.length-e,null!==t?this._verifyTrailingWhitespace(t):null}},{key:"_decodePair",value:function(t){for(var e=[],r=0;r<t.length;r++){var n=this._decodeCode(t[r]);if(!n)return null;e.push(n)}return e}},{key:"_decodeCode",value:function(t){for(var e={error:Number.MAX_VALUE,code:-1,start:0,end:0},r=0;r<it.length;r++){var n=this._matchPattern(t,it[r]);n<e.error&&(e.code=r,e.error=n)}return e.error<this.AVERAGE_CODE_ERROR?e:null}},{key:"_decodePayload",value:function(t,e,r){for(var n,i=t.length,a=[[0,0,0,0,0],[0,0,0,0,0]],o=0;o<i;){for(var u=0;u<5;u++)a[0][u]=t[o]*this._barSpaceRatio[0],a[1][u]=t[o+1]*this._barSpaceRatio[1],o+=2;if(!(n=this._decodePair(a)))return null;for(var s=0;s<n.length;s++)e.push(n[s].code+""),r.push(n[s])}return n}},{key:"_decode",value:function(){var t=this._findStart();if(!t)return null;var e=this._findEnd();if(!e)return null;var r=[];r.push(t);var n=this._fillCounters(t.end,e.start,!1);if(n.length%10!=0)return null;var i=[];return!this._decodePayload(n,i,r)||i.length%2!=0||i.length<6?null:(r.push(e),{code:i.join(""),start:t.start,end:e.end,startInfo:t,decodedCodes:r})}}]),e}(P),ot=[3,1,3,1,1,1],ut=[3,1,1,1,3],st=[[1,1,3,3,1],[3,1,1,1,3],[1,3,1,1,3],[3,3,1,1,1],[1,1,3,1,3],[3,1,3,1,1],[1,3,3,1,1],[1,1,1,3,3],[3,1,1,3,1],[1,3,1,3,1]],ct=ot.reduce(function(t,e){return t+e},0),lt=function(t){function e(t){var r;return a()(this,e),(r=w()(this,C()(e).call(this,t)))._barSpaceRatio=[1,1],r._format="2of5",r._singleCodeError=.78,r._averageCodeError=.3,r}return S()(e,t),u()(e,[{key:"_findPattern",value:function(t,e,r,n){var i=[],a={error:Number.MAX_VALUE,code:-1,start:0,end:0},o=this.AVERAGE_CODE_ERROR,u=0;r=r||!1,n=n||!1,e||(e=this._nextSet(this._row));for(var s=0;s<t.length;s++)i[s]=0;for(var c=e;c<this._row.length;c++)if(this._row[c]^r)i[u]++;else{if(u===i.length-1){for(var l=0,f=0;f<i.length;f++)l+=i[f];var h=this._matchPattern(i,t);if(h<o)return a.error=h,a.start=c-l,a.end=c,a;if(!n)return null;for(var d=0;d<i.length-2;d++)i[d]=i[d+2];i[i.length-2]=0,i[i.length-1]=0,u--}else u++;i[u]=1,r=!r}return null}},{key:"_findStart",value:function(){for(var t,e=this._nextSet(this._row),r=1;!t;){if(!(t=this._findPattern(ot,e,!1,!0)))return null;r=(t.end-t.start)/ct|0;var n=t.start-5*r;if(n>=0&&this._matchRange(n,t.start,0))return t;e=t.end,t=null}return null}},{key:"_verifyTrailingWhitespace",value:function(t){var e=t.end+(t.end-t.start)/2;return e<this._row.length&&this._matchRange(t.end,e,0)?t:null}},{key:"_findEnd",value:function(){this._row.reverse();var t=this._nextSet(this._row),e=this._findPattern(ut,t,!1,!0);if(this._row.reverse(),null===e)return null;var r=e.start;return e.start=this._row.length-e.end,e.end=this._row.length-r,null!==e?this._verifyTrailingWhitespace(e):null}},{key:"_decodeCode",value:function(t){for(var e={error:Number.MAX_VALUE,code:-1,start:0,end:0},r=0;r<st.length;r++){var n=this._matchPattern(t,st[r]);n<e.error&&(e.code=r,e.error=n)}return e.error<this.AVERAGE_CODE_ERROR?e:null}},{key:"_decodePayload",value:function(t,e,r){for(var n,i=t.length,a=[0,0,0,0,0],o=0;o<i;){for(var u=0;u<5;u++)a[u]=t[o]*this._barSpaceRatio[0],o+=2;if(!(n=this._decodeCode(a)))return null;e.push(n.code+""),r.push(n)}return n}},{key:"_decode",value:function(){var t=this._findStart();if(!t)return null;var e=this._findEnd();if(!e)return null;var r=this._fillCounters(t.end,e.start,!1);if(r.length%10!=0)return null;var n=[],i=[];return i.push(t),!this._decodePayload(r,n,i)||n.length<5?null:(i.push(e),{code:n.join(""),start:t.start,end:e.end,startInfo:t,decodedCodes:i})}}]),e}(P),ft=y()("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*").map(function(t){return t.charCodeAt(0)}),ht=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],dt={code_128_reader:z,ean_reader:Z,ean_5_reader:$,ean_2_reader:J,ean_8_reader:K,code_39_reader:j,code_39_vin_reader:U,codabar_reader:V,upc_reader:tt,upc_e_reader:et,i2of5_reader:at,"2of5_reader":lt,code_93_reader:function(t){function e(){var t;return a()(this,e),(t=w()(this,C()(e).call(this)))._format="code_93",t}return S()(e,t),u()(e,[{key:"_decode",value:function(){var t=this._findStart();if(!t)return null;var e,r,n=[],i=[0,0,0,0,0,0],a=this._nextSet(this._row,t.end);do{i=this._toCounters(a,i);var o=this._toPattern(i);if(o<0)return null;if((e=this._patternToChar(o))<0)return null;n.push(e),r=a,a+=i.reduce(function(t,e){return t+e},0),a=this._nextSet(this._row,a)}while("*"!==e);return n.pop(),n.length&&this._verifyEnd(r,a,i)&&this._verifyChecksums(n)?(n=n.slice(0,n.length-2),null===(n=this._decodeExtended(n))?null:{code:n.join(""),start:t.start,end:a,startInfo:t,decodedCodes:n}):null}},{key:"_verifyEnd",value:function(t,e){return!(t===e||!this._row[e])}},{key:"_patternToChar",value:function(t){for(var e=0;e<ht.length;e++)if(ht[e]===t)return String.fromCharCode(ft[e]);return-1}},{key:"_toPattern",value:function(t){for(var e=t.length,r=0,n=0,i=0;i<e;i++)n+=t[i];for(var a=0;a<e;a++){var o=Math.round(9*t[a]/n);if(o<1||o>4)return-1;if(0==(1&a))for(var u=0;u<o;u++)r=r<<1|1;else r<<=o}return r}},{key:"_findStart",value:function(){for(var t,e=[0,0,0,0,0,0],r=this._nextSet(this._row),n=r,i=0,a=!1,o=r;o<this._row.length;o++)if(this._row[o]^a)e[i]++;else{if(i===e.length-1){if(350===this._toPattern(e)&&(t=0|Math.max(0,n-(o-n)/4),this._matchRange(t,n,0)))return{start:n,end:o};n+=e[0]+e[1];for(var u=0;u<4;u++)e[u]=e[u+2];e[4]=0,e[5]=0,i--}else i++;e[i]=1,a=!a}return null}},{key:"_decodeExtended",value:function(t){for(var e=t.length,r=[],n=0;n<e;n++){var i=t[n];if(i>="a"&&i<="d"){if(n>e-2)return null;var a=t[++n],o=a.charCodeAt(0),u=void 0;switch(i){case"a":if(!(a>="A"&&a<="Z"))return null;u=String.fromCharCode(o-64);break;case"b":if(a>="A"&&a<="E")u=String.fromCharCode(o-38);else if(a>="F"&&a<="J")u=String.fromCharCode(o-11);else if(a>="K"&&a<="O")u=String.fromCharCode(o+16);else if(a>="P"&&a<="S")u=String.fromCharCode(o+43);else{if(!(a>="T"&&a<="Z"))return null;u=String.fromCharCode(127)}break;case"c":if(a>="A"&&a<="O")u=String.fromCharCode(o-32);else{if("Z"!==a)return null;u=":"}break;case"d":if(!(a>="A"&&a<="Z"))return null;u=String.fromCharCode(o+32)}r.push(u)}else r.push(i)}return r}},{key:"_verifyChecksums",value:function(t){return this._matchCheckChar(t,t.length-2,20)&&this._matchCheckChar(t,t.length-1,15)}},{key:"_matchCheckChar",value:function(t,e,r){var n=t.slice(0,e),i=n.length,a=n.reduce(function(t,e,n){return t+((-1*n+(i-1))%r+1)*ft.indexOf(e.charCodeAt(0))},0);return ft[a%47]===t[e].charCodeAt(0)}}]),e}(P)},vt=function(){function t(e,r){a()(this,t),this._config=e,this._inputImageWrapper=r,this._canvas={ctx:{frequency:null,pattern:null,overlay:null},dom:{frequency:null,pattern:null,overlay:null}},this._barcodeReaders=[],this._initCanvas(),this._initReaders(),this._initConfig()}return u()(t,[{key:"_initCanvas",value:function(){}},{key:"_initReaders",value:function(){var t=this;this._config.readers.forEach(function(e){var r,n={},i=[];"object"===d()(e)?(r=e.format,n=e.config||{}):"string"==typeof e&&(r=e),n.supplements&&(i=n.supplements.map(function(t){return new dt[t]})),t._barcodeReaders.push(new dt[r](n,i))})}},{key:"_initConfig",value:function(){0}},{key:"_getExtendedLine",value:function(t,e){function r(r){var n=r*Math.sin(e),i=r*Math.cos(e);t[0].y-=n,t[0].x-=i,t[1].y+=n,t[1].x+=i}var n=.1*Math.sqrt(Math.pow(t[1].y-t[0].y,2)+Math.pow(t[1].x-t[0].x,2))|0;for(r(n);n>1&&(!this._inputImageWrapper.inImageWithBorder(t[0],0)||!this._inputImageWrapper.inImageWithBorder(t[1],0));)r(-(n>>=1));return t}},{key:"_getLine",value:function(t){return[{x:(t[1].x+t[0].x)/2,y:(t[1].y+t[0].y)/2},{x:(t[3].x+t[2].x)/2,y:(t[3].y+t[2].y)/2}]}},{key:"_tryDecode",value:function(t){var e=b.getBarcodeLine(this._inputImageWrapper,t[0],t[1]);b.toBinaryLine(e);for(var r=0;r<this._barcodeReaders.length;r++){var n=this._barcodeReaders[r].decodePattern(e.line);if(n)return{codeResult:n,barcodeLine:e}}return null}},{key:"_tryDecodeBruteForce",value:function(t,e,r){for(var n=Math.sqrt(Math.pow(t[1].x-t[0].x,2)+Math.pow(t[1].y-t[0].y,2)),i=Math.sin(r),a=Math.cos(r),o=1;o<16;o++){var u=n/16*o*(o%2==0?-1:1);e[0].y+=u*i,e[0].x-=u*a,e[1].y+=u*i,e[1].x-=u*a;var s=this._tryDecode(e);if(s)return s}return null}},{key:"decodeFromBoundingBox",value:function(t){this._canvas.ctx.overlay,this._config.debug;var e=this._getLine(t);if(null===e)return null;var r=Math.atan2(e[1].y-e[0].y,e[1].x-e[0].x);e=this._getExtendedLine(e,r);var n=this._tryDecode(e);return null===n&&(n=this._tryDecodeBruteForce(t,e,r)),null===n?null:{codeResult:n.codeResult,line:e,angle:r,pattern:n.barcodeLine.line,threshold:n.barcodeLine.threshold}}},{key:"decodeFromBoundingBoxes",value:function(t){for(var e=[],r=this._config.multiple,n=0;n<t.length;n++){var i=t[n],a=this.decodeFromBoundingBox(i)||{};if(a.box=i,r)e.push(a);else if(a.codeResult)return a}return r?{barcodes:e}:null}},{key:"setReaders",value:function(t){this._config.readers=t,this._barcodeReaders.length=0,this._initReaders()}}]),t}();function gt(t,e){return function(t){return navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(t):Promise.reject(new Error("getUserMedia is not defined"))}(e).then(function(e){return new Promise(function(r){q=e,t.setAttribute("autoplay",!0),t.setAttribute("muted",!0),t.setAttribute("playsinline",!0),t.srcObject=e,t.addEventListener("loadedmetadata",function(){t.play(),r()})})}).then(function(t){var e=t.videoWidth,r=t.videoHeight;return new Promise(function(t,n){var i=10;!function a(){i>0?e>10&&r>10?t():window.setTimeout(a,500):n("Unable to play video stream. Is webcam working?"),i--}()})}.bind(null,t))}function _t(t){var e=t.width,r=t.height,n=t.facingMode,i=t.aspectRatio,a=t.deviceId;return void 0!==t.minAspectRatio&&t.minAspectRatio>0&&(i=t.minAspectRatio,console.log("WARNING: Constraint 'minAspectRatio' is deprecated; Use 'aspectRatio' instead")),void 0!==t.facing&&(n=t.facing,console.log("WARNING: Constraint 'facing' is deprecated. Use 'facingMode' instead'")),{width:e,height:r,facingMode:n,aspectRatio:i,deviceId:a}}function yt(){var t=q&&q.getVideoTracks();return t&&t.length?t[0]:null}var pt={request:function(t,e){return function(t){var e={audio:!1,video:_t(t)};return e.video.deviceId&&e.video.facingMode&&delete e.video.facingMode,Promise.resolve(e)}(e).then(gt.bind(null,t))},release:function(){var t=q&&q.getVideoTracks();t&&t.length&&t[0].stop(),q=null},enumerateVideoDevices:function(){return(navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices():Promise.reject(new Error("enumerateDevices is not defined"))).then(function(t){return t.filter(function(t){return"videoinput"===t.kind})})},getActiveStreamLabel:function(){var t=yt();return t?t.label:""},getActiveTrack:yt},mt=Math.PI/2,bt=function(){function t(e,r){a()(this,t),this._inputStream=e,this._streamConfig=e.getConfig(),this._canvasWidth=e.getCanvasWidth(),this._canvasHeight=e.getCanvasHeight(),this._width=e.getWidth(),this._height=e.getHeight();var n=e.getTopRight();this._sx=n.x,this._sy=n.y,this._canvas=r||document.createElement("canvas"),this._canvas.width=this._canvasWidth,this._canvas.height=this._canvasHeight,this._context=this._canvas.getContext("2d"),this._data=new Uint8Array(this._width*this._height)}return u()(t,[{key:"attachData",value:function(t){this._data=t}},{key:"grab",value:function(){var t=this._streamConfig.halfSample,e=this._inputStream.getFrame(),r=e,n=0;if(r){if(this._adjustCanvasSize(),"ImageStream"===this._streamConfig.type&&(r=e.image,e.tags))switch(e.tags.orientation){case 6:n=mt;break;case 8:n=-mt}if(0!==n){var i=this._canvasWidth>>1,a=this._canvasHeight>>1;this._context.translate(i,a),this._context.rotate(n),this._context.drawImage(r,-a,-i,this._canvasHeight,this._canvasWidth),this._context.rotate(-n),this._context.translate(-i,-a)}else this._context.drawImage(r,0,0,this._canvasWidth,this._canvasHeight);var o=this._context.getImageData(this._sx,this._sy,this._width,this._height).data;return t?this._grayAndHalfSampleFromCanvasData(o):this._computeGray(o),!0}return!1}},{key:"_adjustCanvasSize",value:function(){this._canvas.width!==this._canvasWidth&&(this._canvas.width=this._canvasWidth),this._canvas.height!==this._canvasHeight&&(this._canvas.height=this._canvasHeight)}},{key:"_grayAndHalfSampleFromCanvasData",value:function(t){for(var e=t.length>>2,r=this._width>>1,n=0,i=this._width,a=0;i<e;){for(var o=0;o<r;o++){var u=n<<2,s=i<<2;this._data[a]=(.299*t[u+0]+.587*t[u+1]+.114*t[u+2]+(.299*t[u+4]+.587*t[u+5]+.114*t[u+6])+(.299*t[s+0]+.587*t[s+1]+.114*t[s+2])+(.299*t[s+4]+.587*t[s+5]+.114*t[s+6]))/4,a++,n+=2,i+=2}n+=this._width,i+=this._width}}},{key:"_computeGray",value:function(t){var e=t.length;if(this._streamConfig&&this._streamConfig.singleChannel)for(var r=0,n=0;r<e;r+=4,n++)this._data[n]=t[r];else for(var i=0,a=0;i<e;i+=4,a++)this._data[a]=.299*t[i]+.587*t[i+1]+.114*t[i+2]}}]),t}(),xt=n(6),wt=n.n(xt),kt=n(12),Ct=n.n(kt),Et={274:"orientation"},St=Object.keys(Et).map(function(t){return Et[t]});function Rt(t){return At.apply(this,arguments)}function At(){return(At=Ct()(wt.a.mark(function t(e){var r,n,i=arguments;return wt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=i.length>1&&void 0!==i[1]?i[1]:St,!/^blob:/i.test(e)){t.next=6;break}return t.next=4,Ot(e);case 4:return n=t.sent,t.abrupt("return",Pt(n,r));case 6:return t.abrupt("return",Promise.resolve(null));case 7:case"end":return t.stop()}},t)}))).apply(this,arguments)}function Pt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:St,r=new DataView(t),n=t.byteLength,i=e.reduce(function(t,e){var r=Object.keys(Et).find(function(t){return Et[t]===e});return r&&(t[r]=e),t},{}),a=2;if(255!==r.getUint8(0)||216!==r.getUint8(1))return!1;for(;a<n;){if(255!==r.getUint8(a))return!1;if(225===r.getUint8(a+1))return Tt(r,a+4,i);a+=2+r.getUint16(a+2)}return!1}function Ot(t){return Dt.apply(this,arguments)}function Dt(){return(Dt=Ct()(wt.a.mark(function t(e){var r;return wt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:if(!(r=t.sent).ok){t.next=5;break}return t.abrupt("return",r.arrayBuffer());case 5:throw new Error("HTTP Error",r.status);case 6:case"end":return t.stop()}},t)}))).apply(this,arguments)}function Tt(t,e,r){if("Exif".split().some(function(r,n){return t.getUint8(e+n)!==r.charCodeAt(0)}))return!1;var n,i=e+6;if(18761===t.getUint16(i))n=!1;else{if(19789!==t.getUint16(i))return!1;n=!0}if(42!==t.getUint16(i+2,!n))return!1;var a=t.getUint32(i+4,!n);return!(a<8)&&function(t,e,r,n){for(var i=t.getUint16(e,!n),a={},o=0;o<i;o++){var u=e+12*o+2,s=r[t.getUint16(u,!n)];s&&(a[s]=zt(t,u,n))}return a}(t,i+a,r,n)}function zt(t,e,r){var n=t.getUint16(e+2,!r),i=t.getUint32(e+4,!r);return 3===n&&1===i?t.getUint16(e+8,!r):void 0}var Lt,Mt,jt,It,Wt,Ut,Nt,Ft=function(){function t(){a()(this,t)}var e;return u()(t,null,[{key:"load",value:(e=Ct()(wt.a.mark(function t(e,r,n,i,a){var o,u,s,c,l,f,h,d;return wt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(c=function(){return(c=Ct()(wt.a.mark(function t(n){var i,s,c,l,f;return wt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=u.notLoaded,s=0;case 2:if(!(s<i.length)){t.next=18;break}if(i[s]!==n){t.next=15;break}i.splice(s,1),c=0;case 6:if(!(c<o.length)){t.next=14;break}if(l=o[c].substr(o[c].lastIndexOf("/")),-1===n.src.lastIndexOf(l)){t.next=11;break}return u[c]={image:n},t.abrupt("break",14);case 11:c++,t.next=6;break;case 14:return t.abrupt("break",18);case 15:s++,t.next=2;break;case 18:if(0!==i.length){t.next=34;break}if(t.prev=20,!1!==a){t.next=26;break}return f=u[0],t.next=25,Rt(e);case 25:f.tags=t.sent;case 26:t.next=31;break;case 28:t.prev=28,t.t0=t.catch(20),console.log(t.t0);case 31:return t.prev=31,r(u),t.finish(31);case 34:case"end":return t.stop()}},t,null,[[20,28,31,34]])}))).apply(this,arguments)},s=function(t){return c.apply(this,arguments)},o=new Array(i),u=new Array(i),!1===a)o[0]=e;else for(l=0;l<i;l++)f=n+l,o[l]=e+"image-"+("00"+f).slice(-3)+".jpg";for(u.notLoaded=[],u.addImage=function(t){u.notLoaded.push(t)},h=function(t){var e=new Image;u.addImage(e),e.onload=function(){return s(e)},e.src=o[t]},d=0;d<o.length;d++)h(d);case 9:case"end":return t.stop()}},t)})),function(t,r,n,i,a){return e.apply(this,arguments)})}]),t}(),Bt=function(){function t(){a()(this,t)}return u()(t,null,[{key:"createVideoStream",value:function(t){var e,r,n={},i=null,a=["canrecord","ended"],o={},u={x:0,y:0},s=0,c=0;return n.getRealWidth=function(){return t.videoWidth},n.getRealHeight=function(){return t.videoHeight},n.getWidth=function(){return e},n.getHeight=function(){return r},n.setWidth=function(t){e=t},n.setHeight=function(t){r=t},n.setInputStream=function(e){i=e,t.src=void 0!==e.src?e.src:""},n.ended=function(){return t.ended},n.getConfig=function(){return i},n.setAttribute=function(e,r){t.setAttribute(e,r)},n.pause=function(){t.pause()},n.play=function(){t.play()},n.setCurrentTime=function(e){"LiveStream"!==i.type&&(t.currentTime=e)},n.addEventListener=function(e,r,n){-1!==a.indexOf(e)?(o[e]||(o[e]=[]),o[e].push(r)):t.addEventListener(e,r,n)},n.clearEventHandlers=function(){a.forEach(function(e){var r=o[e];r&&r.length>0&&r.forEach(function(r){return t.removeEventListener(e,r)})})},n.trigger=function(a,u){var l,f,h=o[a];if("canrecord"===a&&(l=t.videoWidth,f=t.videoHeight,s=e=i.size?l>f?i.size:l*i.size/f|0:l,c=r=i.size?l>f?f*i.size/l|0:i.size:f),h&&h.length>0)for(var d=0;d<h.length;d++)h[d].apply(n,u)},n.setTopRight=function(t){u.x=t.x,u.y=t.y},n.getTopRight=function(){return u},n.setCanvasSize=function(t,e){s=t,c=e},n.getCanvasWidth=function(){return s},n.getCanvasHeight=function(){return c},n.getFrame=function(){return t},n}},{key:"createLiveStream",value:function(e){e.setAttribute("autoplay",!0);var r=t.createVideoStream(e);return r.ended=function(){return!1},r}},{key:"createImageStream",value:function(){var t,e,r={},n=null,i=0,a=0,o=0,u=!0,s=!1,c=null,l=0,f=1,h=null,d=!1,v=["canrecord","ended"],g={},_={x:0,y:0},y=0,p=0;function m(t,e){var n=g[t];if(n&&n.length>0)for(var i=0;i<n.length;i++)n[i].apply(r,e)}return r.trigger=m,r.getWidth=function(){return t},r.getHeight=function(){return e},r.setWidth=function(e){t=e},r.setHeight=function(t){e=t},r.getRealWidth=function(){return i},r.getRealHeight=function(){return a},r.setInputStream=function(r){n=r,!1===r.sequence?(h=r.src,l=1):(h=r.src,l=r.length),s=!1,Ft.load(h,function(r){switch(c=r,r[0].tags&&r[0].tags.orientation){case 6:case 8:i=r[0].image.height,a=r[0].image.width;break;default:i=r[0].image.width,a=r[0].image.height}y=t=n.size?i>a?n.size:i*n.size/a|0:i,p=e=n.size?i>a?a*n.size/i|0:n.size:a,s=!0,o=0,setTimeout(function(){return m("canrecord",[])},0)},f,l,n.sequence)},r.ended=function(){return d},r.setAttribute=function(){},r.getConfig=function(){return n},r.pause=function(){u=!0},r.play=function(){u=!1},r.setCurrentTime=function(t){o=t},r.addEventListener=function(t,e){-1!==v.indexOf(t)&&(g[t]||(g[t]=[]),g[t].push(e))},r.setTopRight=function(t){_.x=t.x,_.y=t.y},r.getTopRight=function(){return _},r.setCanvasSize=function(t,e){y=t,p=e},r.getCanvasWidth=function(){return y},r.getCanvasHeight=function(){return p},r.getFrame=function(){var t;return s?(u||(t=c[o],o<l-1?o++:setTimeout(function(){d=!0,m("ended",[])},0)),t):null},r}}]),t}(),Vt=n(14),Gt={ctx:{image:null,overlay:null},dom:{image:null,overlay:null}},Ht=[],Xt=!0,qt={};function Qt(t){!function(t){It=t||new f.a({x:Lt.getWidth(),y:Lt.getHeight()});0;Wt=[{x:0,y:0},{x:0,y:It.size.y},{x:It.size.x,y:It.size.y},{x:It.size.x,y:0}],Vt.a.init(It,qt.locator)}(t),Ut=new vt(qt.decoder,It)}function Yt(t){var e;if("VideoStream"===qt.inputStream.type)e=document.createElement("video"),Lt=Bt.createVideoStream(e);else if("ImageStream"===qt.inputStream.type)Lt=Bt.createImageStream();else if("LiveStream"===qt.inputStream.type){var r=Zt();r&&((e=r.querySelector("video"))||(e=document.createElement("video"),r.appendChild(e))),Lt=Bt.createLiveStream(e),pt.request(e,qt.inputStream.constraints).then(function(){return Lt.trigger("canrecord")},function(e){return t(e)})}Lt.setAttribute("preload","auto"),Lt.setInputStream(qt.inputStream),Lt.addEventListener("canrecord",function(t){Vt.a.checkImageConstraints(Lt,qt.locator),function(){if("undefined"!=typeof document){var t=Zt();if(Gt.dom.image=document.querySelector("canvas.imgBuffer"),Gt.dom.image||(Gt.dom.image=document.createElement("canvas"),Gt.dom.image.className="imgBuffer",t&&"ImageStream"===qt.inputStream.type&&t.appendChild(Gt.dom.image)),Gt.ctx.image=Gt.dom.image.getContext("2d"),Gt.dom.image.width=Lt.getCanvasWidth(),Gt.dom.image.height=Lt.getCanvasHeight(),Gt.dom.overlay=document.querySelector("canvas.drawingBuffer"),!Gt.dom.overlay){Gt.dom.overlay=document.createElement("canvas"),Gt.dom.overlay.className="drawingBuffer",t&&t.appendChild(Gt.dom.overlay);var e=document.createElement("br");e.setAttribute("clear","all"),t&&t.appendChild(e)}Gt.ctx.overlay=Gt.dom.overlay.getContext("2d"),Gt.dom.overlay.width=Lt.getCanvasWidth(),Gt.dom.overlay.height=Lt.getCanvasHeight()}}(),Mt=new bt(Lt,Gt.dom.image),ie(qt.numOfWorkers,function(){0===qt.numOfWorkers&&Qt(),function(t){Lt.play(),t()}(t)})}.bind(void 0,t))}function Zt(){var t=qt.inputStream.target;if(t&&t.nodeName&&1===t.nodeType)return t;var e="string"==typeof t?t:"#interactive.viewport";return document.querySelector(e)}function Kt(t,e){t.forEach(function(t){t.x+=e.x,t.y+=e.y})}function Jt(t,e){var r=t;if(t&&Xt){var n=Lt.getTopRight();0===n.x&&0===n.y||function t(e,r){e.barcodes&&e.barcodes.forEach(function(e){return t(e,r)}),e.line&&Kt(e.line,r),e.box&&Kt(e.box,r),e.boxes&&e.boxes.forEach(function(t){return Kt(t,r)})}(t,n),function t(e,r,n,i){r&&Nt&&(e.barcodes?e.barcodes.forEach(function(e){e.codeResult&&t(e,r,n,i)}):e.codeResult&&Nt.addResult(r,n,i,e.codeResult))}(t,e,Lt.getCanvasWidth(),Lt.getCanvasHeight()),r=t.barcodes||t}l.publish("processed",r),function(t){return t&&(!!t.codeResult||t.barcodes&&t.barcodes.some(function(t){return t.codeResult}))}(t)&&l.publish("detected",r)}function $t(){var t=qt.locate?Vt.a.locate():[[Wt[0],Wt[1],Wt[2],Wt[3]]];if(t){var e=Ut.decodeFromBoundingBoxes(t)||{};e.boxes=t,Jt(e,It.data)}else Jt()}function te(){var t;if(Xt){if(Ht.length>0){if(!(t=Ht.find(function(t){return!t.busy})))return;Mt.attachData(t.imageData)}else Mt.attachData(It.data);Mt.grab()&&(t?(t.busy=!0,t.worker.postMessage({cmd:"process",imageData:t.imageData},[t.imageData.buffer])):$t())}else $t()}function ee(){var t,e;Xt&&"LiveStream"===qt.inputStream.type?(t=1e3/(qt.frequency||60),e=null,jt=!1,function r(n){e=e||n,jt||(n>=e&&(e+=t,te()),window.requestAnimationFrame(r))}(performance.now())):te()}function re(e){var r,n=function(){var e;void 0!==t&&(e=t);var r=new Blob(["("+ne.toString()+")("+e+");"],{type:"text/javascript"});return window.URL.createObjectURL(r)}(),i={worker:new Worker(n),imageData:new Uint8Array(Lt.getWidth()*Lt.getHeight()),busy:!0};i.worker.onmessage=function(t){"initialized"===t.data.event?(URL.revokeObjectURL(n),i.busy=!1,i.imageData=new Uint8Array(t.data.imageData),e(i)):"processed"===t.data.event?(i.imageData=new Uint8Array(t.data.imageData),i.busy=!1,Jt(t.data.result,i.imageData)):t.data.event},i.worker.postMessage({cmd:"init",size:{x:Lt.getWidth(),y:Lt.getHeight()},imageData:i.imageData,config:(r=qt,v(r,{inputStream:{target:null}}))},[i.imageData.buffer])}function ne(t){var e,r;!t||(e=t().default)?self.onmessage=function(t){if("init"===t.data.cmd){var a=t.data.config;a.numOfWorkers=0,r=new e.ImageWrapper({x:t.data.size.x,y:t.data.size.y},new Uint8Array(t.data.imageData)),e.init(a,i,r),e.onProcessed(n)}else"process"===t.data.cmd?(r.data=new Uint8Array(t.data.imageData),e.start()):"setReaders"===t.data.cmd&&e.setReaders(t.data.readers)}:self.postMessage({event:"error",message:"Quagga could not be created"});function n(t){self.postMessage({event:"processed",imageData:r.data,result:t},[r.data.buffer])}function i(){self.postMessage({event:"initialized",imageData:r.data},[r.data.buffer])}}function ie(t,e){var r=t-Ht.length;if(0!==r)if(r<0)Ht.slice(r).forEach(function(t){t.worker.terminate()}),Ht=Ht.slice(0,r),e&&e();else for(var n=0;n<r;n++)re(function(r){Ht.push(r),Ht.length>=t&&e&&e()});else e&&e()}r.default={init:function(t,e,r){qt=v(g,t),r?(Xt=!1,Qt(r),e&&e()):Yt(e)},start:function(){ee()},stop:function(){jt=!0,ie(0),"LiveStream"===qt.inputStream.type&&(pt.release(),Lt.clearEventHandlers())},pause:function(){jt=!0},onDetected:function(t){l.subscribe("detected",t)},offDetected:function(t){l.unsubscribe("detected",t)},onProcessed:function(t){l.subscribe("processed",t)},offProcessed:function(t){l.unsubscribe("processed",t)},setReaders:function(t){!function(t){Ut?Ut.setReaders(t):Xt&&Ht.length>0&&Ht.forEach(function(e){return e.worker.postMessage({cmd:"setReaders",readers:t})})}(t)},registerResultCollector:function(t){t&&"function"==typeof t.addResult&&(Nt=t)},canvas:Gt,decodeSingle:function(t,e){var r=this;t=v({inputStream:{type:"ImageStream",sequence:!1,size:800,src:t.src},numOfWorkers:1,locator:{halfSample:!1}},t),this.init(t,function(){l.once("processed",function(t){r.stop(),e.call(null,t)},!0),ee()})},ImageWrapper:f.a,ImageDebug:s.a,ResultCollector:c,CameraAccess:pt}}])});